model LibraryStudent {
  id         Int                @id @default(autoincrement())
  firstName  String
  lastName   String
  createdAt  DateTime           @default(now())
  updatedAt  DateTime           @updatedAt
  requests   LibraryRequest[]
  borrowings LibraryBorrowing[]
}

model LibraryUniversity {
  id           Int                @id @default(autoincrement())
  name         String
  createdAt    DateTime           @default(now())
  updatedAt    DateTime           @updatedAt
  bookCopies   LibraryBookCopy[]
  fromRequests LibraryRequest[]   @relation("fromUni")
  toRequests   LibraryRequest[]   @relation("toUni")
  borrowings   LibraryBorrowing[]
}

model LibraryCategory {
  id             Int                   @id @default(autoincrement())
  name           String                @unique
  createdAt      DateTime              @default(now())
  updatedAt      DateTime              @updatedAt
  bookCategories LibraryBookCategory[]
}

model LibraryAuthor {
  id          Int                 @id @default(autoincrement())
  name        String              @unique
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  bookAuthors LibraryBookAuthor[]
}

model LibraryBook {
  id             Int                   @id @default(autoincrement())
  name           String
  isbn           Int                   @unique
  createdAt      DateTime              @default(now())
  updatedAt      DateTime              @updatedAt
  bookCategories LibraryBookCategory[]
  bookAuthors    LibraryBookAuthor[]
  bookCopies     LibraryBookCopy[]
  requests       LibraryRequest[]
  borrowings     LibraryBorrowing[]
}

model LibraryBookCategory {
  id         Int             @id @default(autoincrement())
  book       LibraryBook     @relation(fields: [bookId], references: [id])
  category   LibraryCategory @relation(fields: [categoryId], references: [id])
  bookId     Int
  categoryId Int
  createdAt  DateTime        @default(now())
  updatedAt  DateTime        @updatedAt
}

model LibraryBookAuthor {
  id        Int           @id @default(autoincrement())
  book      LibraryBook   @relation(fields: [bookId], references: [id])
  author    LibraryAuthor @relation(fields: [authorId], references: [id])
  bookId    Int
  authorId  Int
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
}

model LibraryBookCopy {
  id           Int               @id @default(autoincrement())
  book         LibraryBook       @relation(fields: [bookId], references: [id])
  university   LibraryUniversity @relation(fields: [universityId], references: [id])
  bookId       Int
  universityId Int
  status       String
  createdAt    DateTime          @default(now())
  updatedAt    DateTime          @updatedAt
}

model LibraryRequest {
  id               Int               @id @default(autoincrement())
  borrowDate       DateTime
  returnDate       DateTime
  book             LibraryBook       @relation(fields: [bookId], references: [id])
  student          LibraryStudent    @relation(fields: [studentId], references: [id])
  fromUniversity   LibraryUniversity @relation("fromUni", fields: [fromUniversityId], references: [id])
  toUniversity     LibraryUniversity @relation("toUni", fields: [toUniversityId], references: [id])
  bookId           Int
  studentId        Int
  fromUniversityId Int
  toUniversityId   Int
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
}

model LibraryBorrowing {
  id               Int               @id @default(autoincrement())
  book             LibraryBook       @relation(fields: [bookId], references: [id])
  student          LibraryStudent    @relation(fields: [studentId], references: [id])
  university       LibraryUniversity @relation(fields: [universityId], references: [id])
  bookId           Int
  borrowDate       DateTime
  returnDate       DateTime
  actualReturnDate DateTime
  studentId        Int
  universityId     Int
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
}
