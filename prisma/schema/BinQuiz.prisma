model QuizCategory {
  id        Int      @id @default(autoincrement())
  name      String
  quizzes   Quiz[]
  rounds    Round[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("Category")
  @@schema("binquiz")
}

model Choice {
  id                  Int            @id @default(autoincrement())
  answerText          String
  quiz                Quiz?          @relation(name: "otherChoices", fields: [quizId], references: [id])
  quizId              Int?
  correctChoiceToQuiz Quiz?          @relation(name: "correctChoice")
  // rounds              Round[]
  shuffledQuizzes     ShuffledQuiz[]
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt

  @@schema("binquiz")
}

model Quiz {
  id              Int            @id @default(autoincrement())
  questionText    String
  category        QuizCategory   @relation(fields: [quizCategoryId], references: [id])
  quizCategoryId  Int
  correctChoice   Choice         @relation(name: "correctChoice", fields: [correctChoiceId], references: [id])
  correctChoiceId Int            @unique
  otherChoices    Choice[]       @relation(name: "otherChoices")
  // rounds          Round[]
  shuffledQuizzes ShuffledQuiz[]
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt

  @@schema("binquiz")
}

model Round {
  id              Int            @id @default(autoincrement())
  category        QuizCategory   @relation(fields: [quizCategoryId], references: [id])
  quizCategoryId  Int
  // quizzes         Quiz[]
  shuffledQuizzes ShuffledQuiz[]
  // selectedChoices Choice[]
  // Choice          Choice?        @relation(fields: [choiceId], references: [id])
  // choiceId        Int?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt

  @@schema("binquiz")
}

model ShuffledQuiz {
  id          Int      @id @default(autoincrement())
  round       Round    @relation(fields: [roundId], references: [id])
  roundId     Int
  quiz        Quiz     @relation(fields: [quizId], references: [id])
  quizId      Int
  choice      Choice   @relation(fields: [choiceId], references: [id])
  choiceId    Int
  choiceOrder Int
  isSelected  Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@schema("binquiz")
}
