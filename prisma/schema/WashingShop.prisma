model WashingBranch {
  id                Int                 @id @default(autoincrement())
  branchName        String
  address           String
  tel               String
  area              Int
  ownerName         String
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  WashingMachine    WashingMachine[]
  WashingUseHistory WashingUseHistory[]
}

model WashingMachine {
  id                        Int                         @id @default(autoincrement())
  branch                    WashingBranch               @relation(fields: [branchId], references: [id])
  branchId                  Int
  brand                     String
  weight                    Int
  type                      String
  productionYear            DateTime
  warrantyEnd               DateTime
  createdAt                 DateTime                    @default(now())
  updatedAt                 DateTime                    @updatedAt
  WashingMachineMaintenance WashingMachineMaintenance[]
  WashingUseHistory         WashingUseHistory[]
  WashingMachineOnProgram   WashingMachineOnProgram[]
}

model WashingMachineMaintenance {
  id           Int            @id @default(autoincrement())
  machine      WashingMachine @relation(fields: [machineId], references: [id])
  machineId    Int
  symptom      String
  failureLevel Int
  mechanicName String
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
}

model WashingMachineProgram {
  id                      Int                       @id @default(autoincrement())
  programName             String
  price                   Int
  time                    Int
  maxWeight               Int
  createdAt               DateTime                  @default(now())
  updatedAt               DateTime                  @updatedAt
  WashingUseHistory       WashingUseHistory[]
  WashingMachineOnProgram WashingMachineOnProgram[]
}

model WashingMachineOnProgram {
  id        Int                   @id @default(autoincrement())
  machine   WashingMachine        @relation(fields: [machineId], references: [id])
  machineId Int
  program   WashingMachineProgram @relation(fields: [programId], references: [id])
  programId Int
  createdAt DateTime              @default(now())
  updatedAt DateTime              @updatedAt
}

model WashingUser {
  id                Int                 @id @default(autoincrement())
  userName          String
  tel               String
  remainCoupon      Int
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  WashingTopUp      WashingTopUp[]
  WashingUseHistory WashingUseHistory[]
}

model WashingTopUp {
  id          Int         @id @default(autoincrement())
  user        WashingUser @relation(fields: [userId], references: [id])
  userId      Int
  topUpAmount Int
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
}

model WashingUseHistory {
  id           Int                   @id @default(autoincrement())
  user         WashingUser           @relation(fields: [userId], references: [id])
  userId       Int
  useAtBranch  WashingBranch         @relation(fields: [branchId], references: [id])
  branchId     Int
  useAtMachine WashingMachine        @relation(fields: [machineId], references: [id])
  machineId    Int
  useProgram   WashingMachineProgram @relation(fields: [programId], references: [id])
  programId    Int
  price        Int
  startTime    DateTime
  endTime      DateTime
  createdAt    DateTime              @default(now())
  updatedAt    DateTime              @updatedAt
}
